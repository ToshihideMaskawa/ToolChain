# --------------------------------------------------------------------
#  PyQt5Config.cmake – lightweight stub for Windows wheel installs
#  ① 让 find_package(PyQt5 CONFIG) 直接成功
#  ② 提供最常用的变量/导入 target，避免后续 CMake 脚本再次报错
#  注：如果你后期真正编译过 PyQt5，此文件可以删除，用官方生成的即可
# --------------------------------------------------------------------

# ----- 基本存在性 & 版本 ----------------------------------------------------
set(PyQt5_FOUND TRUE)
set(PyQt5_VERSION "5.15.11")          # 改成你 pip install 的版本

# ----- 推断 Qt 根目录（wheel 内部或系统 Qt）-----------------------------------
if(NOT DEFINED _pyqt5_qt_root)
    # wheel 的 Qt DLL 相对位置：<site-packages>/PyQt5/Qt/bin
    get_filename_component(_pyqt5_sitepkg "${CMAKE_CURRENT_LIST_DIR}" DIRECTORY)      # .../cmake
    get_filename_component(_pyqt5_sitepkg "${_pyqt5_sitepkg}" DIRECTORY)              # .../Qt
    get_filename_component(_pyqt5_sitepkg "${_pyqt5_sitepkg}" DIRECTORY)              # .../PyQt5
    set(_pyqt5_qt_root "${_pyqt5_sitepkg}/Qt")
endif()

# 如果外部 PATH 里已经优先放了系统 Qt 5.15.14，则实际加载的 DLL 以系统 Qt 为准
if(EXISTS "${_pyqt5_qt_root}/lib/cmake/Qt5Core/Qt5CoreConfig.cmake")
    list(APPEND CMAKE_PREFIX_PATH "${_pyqt5_qt_root}/lib/cmake")
endif()

# ----- 创建最基本的 IMPORTED target，防止 target_link_libraries(PUBLIC PyQt5::QtCore) 报错 --
if(NOT TARGET PyQt5::QtCore)
    add_library(PyQt5::QtCore UNKNOWN IMPORTED)
endif()
if(NOT TARGET PyQt5::QtGui)
    add_library(PyQt5::QtGui  UNKNOWN IMPORTED)
endif()
if(NOT TARGET PyQt5::QtWidgets)
    add_library(PyQt5::QtWidgets  UNKNOWN IMPORTED)
endif()

# 你也可以按需再加 QtTest/QtNetwork 等模块 —— 只要保证名字对得上即可

# ----- 常规变量，与“真” PyQt5Config 保持接口一致 -----------------------------
set(PyQt5_INCLUDE_DIRS "")            # wheel 不需要头文件，留空即可
set(PyQt5_LIBRARIES "")               # 同上
set(PyQt5_SIP_DIR  "")                # sip 文件夹；SALOME 不会用到
